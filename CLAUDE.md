# Simple Timer プロジェクト

## プロジェクト概要
MacのデスクトップElectronアプリとして、AS Timerユーザーが乗り換えたくなるレベルのタイマーアプリを開発する。

## 目的
- 普段使いのタイマー（集中作業・生活リズム・リマインドなどに）

## 対象ユーザー
- 自分（Macユーザー）
- AS Timerユーザーが「乗り換えたくなる」レベルを目指す

## 必須機能（MVP）
- カウントダウンタイマー（分単位）
- スタート・ストップ・リセット
- シンプルなUI（なるべくマウス不要で完結）
- 通知（終了時の音やポップアップ）

## 追加したい機能（Nice to have）
- キーボードショートカット
- ダークモード対応
- メニューバー常駐
- 設定プリセット（25分集中/5分休憩 みたいな）
- 作業ログ（何回タイマー回したか）

## 技術スタック
- Platform: Mac デスクトップ
- Framework: Electron
- Language: JavaScript/TypeScript（未定）

## 開発順序
1. **基本セットアップ**
   - Electron環境構築
   - 基本的なウィンドウ表示

2. **コアタイマー機能**
   - カウントダウンロジック
   - 分単位の時間設定
   - スタート/ストップ/リセット

3. **シンプルUI**
   - 最小限のボタンとディスプレイ
   - キーボードショートカット（Space:開始/停止、R:リセット、数字:時間設定）

4. **通知機能**
   - タイマー終了時の音
   - Mac通知センター連携

5. **追加機能（優先度順）**
   - ダークモード
   - メニューバー常駐
   - プリセット（25分/5分など）
   - 作業ログ

## 開発進捗

### Phase 1: 基本実装 ✅
- [x] Electronプロジェクトの初期セットアップ
- [x] 基本的なタイマー機能の実装（カウントダウン、スタート・ストップ・リセット）
- [x] 円形プログレスバーによる視覚的UI
- [x] アイコンベースの操作ボタン（再生・リセット）

### Phase 2: UI最適化 ✅
- [x] レイアウト調整とボタン配置の最適化
- [x] アプリサイズの最適化（180x180正方形ウィンドウ）
- [x] プログレスリング周辺へのボタン配置

### Phase 3: アプリ配布対応 ✅
- [x] electron-builderによるmacOSアプリパッケージング
- [x] Intel/Apple Silicon両対応のDMG生成
- [x] カスタムアプリアイコンの作成と実装
- [x] 透明角処理によるアイコン品質向上

### 今後のタスク
- [ ] 通知機能の実装（音・Mac通知）
- [ ] キーボードショートカットの実装
- [ ] ダークモード対応
- [ ] メニューバー常駐機能
- [ ] プリセット機能（ポモドーロなど）
- [ ] 作業ログ機能

## 技術仕様

### アーキテクチャ
- **メインプロセス**: `src/main.ts` - Electronウィンドウ管理
- **レンダラー**: `src/renderer.ts` - タイマーロジックとUI制御
- **スタイリング**: `style.css` - フレックスボックスレイアウト

### ウィンドウ設定
- サイズ: 180x180px（正方形）
- リサイズ不可
- 常に最前面表示

### UI要素
- **進捗表示**: SVGによる円形プログレスリング（半径65px）
- **操作ボタン**: アイコンベース（再生/一時停止、リセット）
- **配置**: タイマー円周辺の右上・左下エリア

### ビルド設定
- **ターゲット**: macOS (Intel/Apple Silicon)
- **出力形式**: DMG、ZIP
- **アイコン**: 透明角処理済みicnsファイル

## リポジトリ
https://github.com/little-hands/simple-timer

## 関連ドキュメント
- [UI要素名一覧](UI_ELEMENTS.md) - 指示時に使用する各要素の名称定義

## GitHub Issue テンプレート

新機能や改善要求のissueを作成する際は、以下のテンプレート構造に従うこと：

### 1. User Story
```
As a [ユーザータイプ]
I want [機能・要求]
Because [理由・背景]
```

### 2. Acceptance Criteria
Gherkin記法（Given-When-Then）を使用してテストシナリオを記述：
```
**Scenario 1: [シナリオ名]**
- Given [前提条件]
- When [アクション]
- Then [期待される結果]

**Scenario 2: [シナリオ名]**
- Given [前提条件]  
- When [アクション]
- Then [期待される結果]
```

### 3. Technical Design
以下の項目を含む技術設計の詳細：
- **現在の実装状況分析**
- **アーキテクチャ選択の根拠**
- **実装アプローチ**
- **具体的なコード修正内容**（ファイル別）
- **設計改善ポイント**
- **エラーハンドリング戦略**
- **テスト手法の推奨事項**

このテンプレートにより、ユーザー視点から技術実装まで包括的にカバーし、実装の品質と一貫性を確保する。

## 開発フロー - Electron自動起動システム

### 概要
Electronコード修正完了時に別プロセスが自動的にアプリを起動するシステム

### 修正側の手順
1. Electronコードの修正を完了
2. 必要に応じてビルドやテストを実行
3. 完了時に以下のコマンドを実行：
   ```bash
   touch build_ready.flag

監視側スクリプト（別ターミナルで実行）

```
while true; do
if [ -f "build_ready.flag" ]; then
echo "ビルド完了通知を受信"
rm build_ready.flag
npm run start
fi
sleep 1
done
```

## tmux操作ガイド

### tmux send-keysコマンドの使用ルール
**文字列を送信する場合は**、必ず以下の形式で実行すること：
```bash
tmux send-keys -t {ペインID（%N形式）} "{送信する文字列}" && sleep 0.2 Enter
```